<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–π ‚Äî Coworking</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <a href="{{ url_for('index') }}" class="logo">Coworking Admin</a>
        <nav>
          <a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="{{ url_for('admin_panel') }}">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a>
          <a href="{{ url_for('admin_reports_bookings') }}">–û—Ç—á–µ—Ç—ã –ø–æ –∑–∞—è–≤–∫–∞–º</a>
          <a href="{{ url_for('admin_reports_availability') }}" class="active">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</a>
          <a href="{{ url_for('admin_users') }}">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
          <a href="{{ url_for('bookings_view') }}">–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</a>
          <a href="{{ url_for('logout') }}">–í—ã—Ö–æ–¥</a>
        </nav>
        <div class="user-info">
          üëë {{ user.username }} (–ê–¥–º–∏–Ω)
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <h1>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–π</h1>
      <p class="page-description">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –∏ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏–π</p>
    </div>

    <!-- –í—ã–±–æ—Ä –¥–∞—Ç—ã -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">–í—ã–±–æ—Ä –¥–∞—Ç—ã</h2>
      </div>
      
      <form method="GET" action="{{ url_for('admin_reports_availability') }}">
        <div class="form-group">
          <label for="date">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞ –¥–∞—Ç—É:</label>
          <input type="date" id="date" name="date" value="{{ target_date.strftime('%Y-%m-%d') }}" required>
        </div>
        
        <div class="btn-group">
          <button type="submit" class="btn btn-primary">
            üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
          </button>
          <button type="button" class="btn btn-outline" onclick="checkToday()">
            üìÖ –°–µ–≥–æ–¥–Ω—è
          </button>
          <button type="button" class="btn btn-outline" onclick="checkTomorrow()">
            üìÜ –ó–∞–≤—Ç—Ä–∞
          </button>
        </div>
      </form>
    </div>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏</h2>
        <div class="card-subtitle">
          –î–∞—Ç–∞: {{ target_date.strftime('%d.%m.%Y') }}
        </div>
      </div>
      
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>–¢–∏–ø –ø–æ–º–µ—â–µ–Ω–∏—è</th>
              <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
              <th>–°—Ç–∞—Ç—É—Å</th>
            </tr>
          </thead>
          <tbody>
            {% for room_key, room_label in rooms_list %}
            <tr>
              <td>{{ room_label }}</td>
              <td>
                {% if room_key == 'workspace_open' %}
                  –û—Ç–∫—Ä—ã—Ç–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã
                {% elif room_key == 'office_light' %}
                  –ù–µ–±–æ–ª—å—à–æ–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è 1-2 —á–µ–ª–æ–≤–µ–∫
                {% elif room_key == 'office_premium' %}
                  –ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º
                {% elif room_key == 'meeting_room' %}
                  –ö–æ–º–Ω–∞—Ç–∞ –¥–ª—è –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤ –∏ –≤—Å—Ç—Ä–µ—á
                {% endif %}
              </td>
              <td>
                {% if available_rooms[room_label] == '–°–≤–æ–±–æ–¥–Ω–æ' %}
                  <span class="status-badge status-available">‚úÖ –°–≤–æ–±–æ–¥–Ω–æ</span>
                {% else %}
                  <span class="status-badge status-booked">‚ùå –ó–∞–Ω—è—Ç–æ</span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <script>
    function checkToday() {
      const today = new Date().toISOString().split('T')[0];
      window.location.href = `/admin/reports/availability?date=${today}`;
    }
    
    function checkTomorrow() {
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      const tomorrowStr = tomorrow.toISOString().split('T')[0];
      window.location.href = `/admin/reports/availability?date=${tomorrowStr}`;
    }
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
    document.addEventListener('DOMContentLoaded', function() {
      const dateInput = document.getElementById('date');
      if (!dateInput.value) {
        const today = new Date().toISOString().split('T')[0];
        dateInput.value = today;
      }
    });
  </script>
  
  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
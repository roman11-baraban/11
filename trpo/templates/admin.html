<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî Coworking</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <a href="{{ url_for('index') }}" class="logo">Coworking Admin</a>
        <nav>
          <a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="{{ url_for('admin_panel') }}" class="active">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a>
          <a href="{{ url_for('admin_reports_bookings') }}">–û—Ç—á–µ—Ç—ã –ø–æ –∑–∞—è–≤–∫–∞–º</a>
          <a href="{{ url_for('admin_reports_availability') }}">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</a>
          <a href="{{ url_for('admin_users') }}">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
          <a href="{{ url_for('bookings_view') }}">–ú–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</a>
          <a href="{{ url_for('logout') }}">–í—ã—Ö–æ–¥</a>
        </nav>
        <div class="user-info">
          üëë {{ user.username }} (–ê–¥–º–∏–Ω)
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <h1>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
      <p class="page-description">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–≤–æ—Ä–∫–∏–Ω–≥-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã</p>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üë•</div>
        <div class="stat-value">{{ total_users }}</div>
        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìã</div>
        <div class="stat-value">{{ total_bookings }}</div>
        <div class="stat-label">–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìÖ</div>
        <div class="stat-value">{{ today_bookings }}</div>
        <div class="stat-label">–ó–∞—è–≤–æ–∫ —Å–µ–≥–æ–¥–Ω—è</div>
      </div>
    </div>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
      </div>
      
      <div class="btn-group">
        <a href="{{ url_for('admin_reports_bookings') }}" class="btn btn-primary">
          üìä –û—Ç—á–µ—Ç—ã –ø–æ –∑–∞—è–≤–∫–∞–º
        </a>
        <a href="{{ url_for('admin_reports_availability') }}" class="btn btn-secondary">
          üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
        </a>
        <a href="{{ url_for('admin_users') }}" class="btn btn-outline">
          üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        </a>
      </div>
    </div>

    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞—è–≤–∫–∏ -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞—è–≤–∫–∏</h2>
        <a href="{{ url_for('admin_reports_bookings') }}" class="btn btn-outline">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</a>
      </div>
      
      {% set recent_bookings = get_all_bookings(end_date=date.today().isoformat()) %}
      {% if recent_bookings %}
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>ID</th>
                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th>–¢–∏–ø –ø–æ–º–µ—â–µ–Ω–∏—è</th>
                <th>–î–∞—Ç–∞</th>
                <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
              </tr>
            </thead>
            <tbody>
              {% for booking in recent_bookings[:5] %}
              <tr>
                <td>#{{ booking[0] }}</td>
                <td>{{ booking[5] }}</td>
                <td>
                  {% if booking[1] == 'workspace_open' %}–û—Ç–∫—Ä—ã—Ç–æ–µ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ
                  {% elif booking[1] == 'office_light' %}–ö–∞–±–∏–Ω–µ—Ç ¬´–õ–∞–π—Ç¬ª
                  {% elif booking[1] == 'office_premium' %}–ö–∞–±–∏–Ω–µ—Ç ¬´–ü—Ä–µ–º–∏—É–º¬ª
                  {% elif booking[1] == 'meeting_room' %}–ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞
                  {% else %}{{ booking[1] }}{% endif %}
                </td>
                <td>{{ booking[2] }}</td>
                <td>{{ booking[4] }} {{ booking[3] }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <div class="empty-state">
          <div class="empty-state-icon">üì≠</div>
          <p>–ù–µ—Ç –∑–∞—è–≤–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–µ—Ä–∏–æ–¥</p>
        </div>
      {% endif %}
    </div>
  </main>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>